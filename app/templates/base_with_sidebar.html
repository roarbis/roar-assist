<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#1a7a4e">
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png">
    <link rel="manifest" href="/static/manifest.json">
    <title>{% block title %}My Apps{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/colors.css">
    <link rel="stylesheet" href="/static/css/sidebar.css">
    {% block head %}{% endblock %}
    {% block extra_css %}{% endblock %}
</head>
<body>
    <!-- Burger Menu Button (Mobile) -->
    <button class="burger-menu" id="burgerMenu" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
    </button>

    <!-- Vertical Sidebar Navigation -->
    <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="/apps" style="text-decoration: none; color: inherit;">
                <h2>‚ú® Aurora Assist</h2>
            </a>
        </div>
        <ul class="sidebar-nav">
            <li>
                <a href="/nutri-track" class="sidebar-link {% if request.path.startswith('/nutri-track') %}active{% endif %}">
                    <span class="sidebar-icon">üçá</span>
                    <span class="sidebar-label">Nutri-Track</span>
                </a>
            </li>
            <li>
                <a href="/news" class="sidebar-link {% if request.path.startswith('/news') %}active{% endif %}">
                    <span class="sidebar-icon">üì∞</span>
                    <span class="sidebar-label">AI News</span>
                </a>
            </li>
            <li>
                <a href="/todo" class="sidebar-link {% if request.path.startswith('/todo') %}active{% endif %}">
                    <span class="sidebar-icon">‚úÖ</span>
                    <span class="sidebar-label">To Do</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Main Content Area -->
    <div class="main-content">
        {% block body %}{% endblock %}
    </div>

    <!-- Burger Menu Script -->
    <script>
        const burgerMenu = document.getElementById('burgerMenu');
        const sidebar = document.getElementById('sidebar');

        if (burgerMenu && sidebar) {
            burgerMenu.addEventListener('click', () => {
                burgerMenu.classList.toggle('active');
                sidebar.classList.toggle('active');
            });

            // Close sidebar when clicking outside on mobile
            document.addEventListener('click', (e) => {
                if (window.innerWidth <= 768) {
                    if (!sidebar.contains(e.target) && !burgerMenu.contains(e.target)) {
                        sidebar.classList.remove('active');
                        burgerMenu.classList.remove('active');
                    }
                }
            });
        }
    </script>
</body>
</html>
